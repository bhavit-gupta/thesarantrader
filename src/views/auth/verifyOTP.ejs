<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/stylesheets/output.css">
</head>

<body class="font-sans antialiased text-slate-600 bg-slate-50 min-h-screen flex flex-col"> <%-
        include('../partials/navbar') %>
        <div class="flex-grow flex items-center justify-center p-4 pt-24">
            <div
                class="w-full max-w-md bg-white rounded-2xl shadow-xl shadow-blue-500/10 border border-slate-100 overflow-hidden">
                <!-- Header -->
                <div class="p-8 text-center bg-white border-b border-slate-50">
                    <!-- <a href="/" class="inline-flex items-center justify-center gap-2 mb-6"> <div class="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-blue-500/20"> T </div> <span class="text-2xl font-bold text-slate-800 tracking-tight">The Saran Trader</span> </a> -->
                    <h1 class="text-2xl font-bold text-slate-800">Verify OTP</h1>
                    <p class="text-slate-500 mt-2">Enter the verification code sent to your mobile number</p>
                </div> <!-- Container -->
                <div class="p-8 pt-6">
                    <div class="space-y-5"> <!-- Step 1: OTP Input -->
                        <div id="otp-section"> <label for="otp"
                                class="block text-sm font-medium text-slate-700 mb-1">One Time Password</label>
                            <div class="flex gap-2 justify-center mb-4"> <input type="text" maxlength="1"
                                    class="otp-input w-12 h-12 text-center text-xl font-bold rounded-xl bg-slate-50 border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"
                                    required> <input type="text" maxlength="1"
                                    class="otp-input w-12 h-12 text-center text-xl font-bold rounded-xl bg-slate-50 border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"
                                    required> <input type="text" maxlength="1"
                                    class="otp-input w-12 h-12 text-center text-xl font-bold rounded-xl bg-slate-50 border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"
                                    required> <input type="text" maxlength="1"
                                    class="otp-input w-12 h-12 text-center text-xl font-bold rounded-xl bg-slate-50 border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"
                                    required> </div>
                            <div id="otp-error" class="hidden text-red-500 text-sm text-center mb-4 transition-all">
                                Incorrect OTP. Please try again. </div> <button type="button" id="verify-btn"
                                onclick="verifyOTP()"
                                class="w-full py-3.5 bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-blue-500/25 hover:bg-blue-700 hover:shadow-blue-500/40 transition-all transform hover:-translate-y-0.5">
                                Verify OTP </button>
                        </div> <!-- Step 2: New Password (Hidden by default) -->
                        <div id="password-section" class="hidden space-y-5">
                            <form action="/auth/reset-password" method="POST" id="reset-form"> <input type="hidden"
                                    name="userId" value="<%= locals.userId %>">
                                <div
                                    class="p-4 bg-green-50 text-green-700 rounded-xl text-center text-sm font-semibold border border-green-100 mb-4">
                                    âœ“ OTP Verified Successfully </div>
                                <div> <label for="password" class="block text-sm font-medium text-slate-700 mb-1">New
                                        Password</label> <input type="password" id="password" name="password"
                                        class="w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"
                                        placeholder="Enter new password" required> </div>
                                <div> <label for="confirm-password"
                                        class="block text-sm font-medium text-slate-700 mb-1">Confirm Password</label>
                                    <input type="password" id="confirm-password" name="confirmPassword"
                                        class="w-full px-4 py-3 rounded-xl bg-slate-50 border border-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"
                                        placeholder="Confirm new password" required>
                                </div> <button type="submit"
                                    class="w-full py-3.5 bg-blue-600 text-white font-bold rounded-xl shadow-lg shadow-blue-500/25 hover:bg-blue-700 hover:shadow-blue-500/40 transition-all transform hover:-translate-y-0.5">
                                    Reset Password </button>
                            </form>
                        </div> <!-- Close outer form which was merely a container previously -->
                        <!-- Note: The structure in original file had one form wrapping both sections. We need to separate them or ensure fields are handled correctly. The simplified plan is to have the OTP check be client side (no form submit) and the password reset be the actual form submit. -->
                        <div class="mt-8 pt-6 border-t border-slate-50 text-center">
                            <p class="text-slate-600 text-sm"> Didn't receive code? <button type="button"
                                    onclick="resendOTP()"
                                    class="text-blue-600 font-bold hover:text-blue-700 focus:outline-none">Resend</button>
                            </p>
                        </div>
                    </div>
                </div>
            </div> <!-- Simple Script for OTP Input Focus -->
            <script src="/javascripts/script.js"></script>
</body>

</html>